{"version":3,"sources":["../cryptoserver/Common.js"],"names":[],"mappings":";;;;;;AACA,IAAM,SAAS,QAAQ,QAAR,CAAf;AACA,IAAM,MAAM,QAAQ,iBAAR,CAAZ;;AAEA,IAAI,SAAS,OAAO,YAAP,CAAoB,EAAC,MAAM,cAAP,EAApB,CAAb;;IAEM,M;YAAA,M;4BAAA,M;;;gBAAA,M;;0CAEiB;AACjB,aAAI,UAAU,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,SAA3B,EAAsC,IAAtC,CAA2C,GAA3C,CAAd;AACA,gBAAO,UAAU,GAAV,EAAe,KAAf,EAAsB;AAC1B,gBAAI,GAAJ,EAAS;AACN,sBAAO,IAAP,CAAY,OAAZ,EAAqB,GAArB;AACF,aAFD,MAEO;AACJ,sBAAO,IAAP,CAAY,OAAZ,EAAqB,KAArB;AACF;AACH,UAND;AAOF;;;oCAEa,I,EAAM,Q,EAAU;AAC3B,aAAI,QAAQ,KAAZ;AACA,gBAAO,UAAU,GAAV,EAAe,MAAf,EAAuB;AAC3B,gBAAI,WAAW,KAAK,KAAL,CAAW,QAAQ,KAAnB,CAAf;AACA,mBAAO,IAAP,CAAY,IAAZ,EAAkB,QAAlB;AACA,qBAAS,GAAT,EAAc,MAAd;AACF,UAJD;AAKF;;;qCAEc,O,EAAS,I,EAAM;AAC3B,gBAAO,YAAY;AAChB,gBAAI,UAAU,CAAd,EAAiB;AACd;AACF;AACD,gBAAI,YAAY,CAAhB,EAAmB;AAChB;AACF;AACH,UAPD;AAQF;;;UA/BE,M;;;AAgCL;;AAED,OAAO,OAAP,GAAiB,IAAI,MAAJ,EAAjB","file":"Common.js","sourcesContent":["\nconst bunyan = require('bunyan');\nconst now = require('performance-now');\n\nvar logger = bunyan.createLogger({name: \"cryptoserver\"});\n\nclass Common {\n\n   createReplyLogger() {\n      var message = Array.prototype.slice.call(arguments).join(' ');\n      return function (err, reply) {\n         if (err) {\n            logger.warn(message, err);\n         } else {\n            logger.info(message, reply);\n         }\n      };\n   }\n\n   callbackTimer(name, callback) {\n      var start = now();\n      return function (err, result) {\n         var duration = Math.round(now() - start);\n         logger.info(name, duration);\n         callback(err, result);\n      };\n   }\n\n   countdownLatch(counter, done) {\n      return function () {\n         if (counter > 0) {\n            counter--;\n         }\n         if (counter === 0) {\n            done();\n         }\n      };\n   }\n};\n\nmodule.exports = new Common();\n"]}