{"version":3,"sources":["../lib/Promises.js"],"names":[],"mappings":";;;;;;;;QAEgB,S,GAAA,S;QAYA,G,GAAA,G;QAIA,K,GAAA,K;QAQA,O,GAAA,O;AAxBT,SAAS,SAAT,CAAmB,EAAnB,EAAuB;AAC3B,UAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACrC,SAAG,UAAC,GAAD,EAAM,MAAN,EAAiB;AACjB,aAAI,GAAJ,EAAS;AACN,mBAAO,GAAP;AACF,UAFD,MAEO;AACJ,oBAAQ,MAAR;AACF;AACH,OAND;AAOF,IARM,CAAP;AASF;;AAEM,SAAS,GAAT,CAAa,MAAb,EAAqB,EAArB,EAAyB;AAC7B,UAAO,QAAQ,GAAR,CAAY,OAAO,GAAP,CAAW,EAAX,CAAZ,CAAP;AACF;;AAEM,SAAS,KAAT,CAAe,MAAf,EAAuB;AAC3B,UAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACrC,iBAAW,YAAM;AACd;AACF,OAFD,EAEG,MAFH;AAGF,IAJM,CAAP;AAKF;;AAEM,SAAS,OAAT,CAAiB,OAAjB,EAA0B,MAA1B,EAAkC,OAAlC,EAA2C;AAC/C,OAAI,OAAJ,EAAa;AACV,aAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACrC,gBAAO,KAAP,CAAa,SAAb,SAA+B,OAA/B,yCAA+B,OAA/B,G;AACA,iBAAQ,IAAR,CAAa,OAAb,EAAsB,MAAtB;AACA,oBAAW,YAAM;AACd,mBAAU,MAAV,UAAqB,OAArB;AACF,UAFD,EAEG,OAFH;AAGF,OANM,CAAP;AAOF,IARD,MAQO;AACJ,aAAO,OAAP;AACF;AACH","file":"Promises.js","sourcesContent":["\n\nexport function promisify(fn) {\n   return new Promise((resolve, reject) => {\n      fn((err, result) => {\n         if (err) {\n            reject(err);\n         } else {\n            resolve(result);\n         }\n      });\n   });\n}\n\nexport function map(values, fn) {\n   return Promise.all(values.map(fn));\n}\n\nexport function delay(millis) {\n   return new Promise((resolve, reject) => {\n      setTimeout(() => {\n         resolve();\n      }, millis);\n   });\n}\n\nexport function timeout(timeout, reason, promise) {\n   if (timeout) {\n      return new Promise((resolve, reject) => {\n         logger.error('timeout', typeof promise); // TODO\n         promise.then(resolve, reject);\n         setTimeout(() => {\n            reject(`${reason} (${timeout}ms)`);\n         }, timeout);\n      });\n   } else {\n      return promise;\n   }\n}\n"]}